<html><head><meta http-equiv="content-type" content="text/html; charset=UTF-8"> <style>\n	.KEYW {color: #933;}\n	.COMM {color: #bbb; font-style: italic;}\n	.NUMB {color: #393;}\n	.STRN {color: #393;}\n	.REGX {color: #339;}\n	.line {border-right: 1px dotted #666; color: #666; font-style: normal;}\n	</style></head><body><pre><span class='line'>  1</span> <span class="KEYW">function</span><span class="WHIT"> </span><span class="NAME">roundCoordinates</span><span class="PUNC">(</span><span class="NAME">mDouble</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">mNumDigits</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="TOKN">
<span class='line'>  2</span> </span><span class="WHIT">    </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">mFact</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">Math.pow</span><span class="PUNC">(</span><span class="NUMB">10</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">mNumDigits</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="TOKN">
<span class='line'>  3</span> </span><span class="WHIT">    </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">mPoint</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">Math.round</span><span class="PUNC">(</span><span class="NAME">mDouble</span><span class="WHIT"> </span><span class="PUNC">*</span><span class="WHIT"> </span><span class="NAME">mFact</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">/</span><span class="WHIT"> </span><span class="NAME">mFact</span><span class="TOKN">
<span class='line'>  4</span> </span><span class="WHIT">    </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">mPoint</span><span class="PUNC">;</span><span class="TOKN">
<span class='line'>  5</span> </span><span class="PUNC">}</span><span class="TOKN">
<span class='line'>  6</span> </span><span class="TOKN">
<span class='line'>  7</span> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="NAME">openPopup</span><span class="PUNC">(</span><span class="NAME">pUrl</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="TOKN">
<span class='line'>  8</span> </span><span class="WHIT">    </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">left</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">jQuery</span><span class="PUNC">(</span><span class="NAME">window</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">width</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">/</span><span class="WHIT"> </span><span class="NUMB">2</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">-</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NUMB">900</span><span class="WHIT"> </span><span class="PUNC">/</span><span class="WHIT"> </span><span class="NUMB">2</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="TOKN">
<span class='line'>  9</span> </span><span class="WHIT">    </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">top</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">jQuery</span><span class="PUNC">(</span><span class="NAME">window</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">height</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">/</span><span class="WHIT"> </span><span class="NUMB">2</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">-</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NUMB">600</span><span class="WHIT"> </span><span class="PUNC">/</span><span class="WHIT"> </span><span class="NUMB">2</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="TOKN">
<span class='line'> 10</span> </span><span class="WHIT">    </span><span class="NAME">popup</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">window.open</span><span class="PUNC">(</span><span class="NAME">pUrl</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="STRN">"popup"</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="STRN">"width=900, height=600, top="</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="NAME">top</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="STRN">", left="</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="NAME">left</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="TOKN">
<span class='line'> 11</span> </span><span class="PUNC">}</span><span class="TOKN">
<span class='line'> 12</span> </span><span class="TOKN">
<span class='line'> 13</span> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="NAME">setDefaultZoomTo</span><span class="PUNC">(</span><span class="NAME">zoomLevel</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="TOKN">
<span class='line'> 14</span> </span><span class="WHIT">    </span><span class="NAME">defaultZoomTo</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">zoomLevel</span><span class="PUNC">;</span><span class="TOKN">
<span class='line'> 15</span> </span><span class="WHIT">    </span><span class="NAME">jQuery</span><span class="PUNC">(</span><span class="STRN">"#defaultZoomTo"</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">slider</span><span class="PUNC">(</span><span class="STRN">"value"</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">zoomLevel</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="TOKN">
<span class='line'> 16</span> </span><span class="WHIT">    </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="KEYW">true</span><span class="PUNC">;</span><span class="TOKN">
<span class='line'> 17</span> </span><span class="PUNC">}</span><span class="TOKN">
<span class='line'> 18</span> </span><span class="TOKN">
<span class='line'> 19</span> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="NAME">resetGeocodingForm</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="TOKN">
<span class='line'> 20</span> </span><span class="WHIT">    </span><span class="NAME">jQuery</span><span class="PUNC">(</span><span class="STRN">"input.resetable, select.resetable"</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="STRN">"form#gc"</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">val</span><span class="PUNC">(</span><span class="STRN">""</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="TOKN">
<span class='line'> 21</span> </span><span class="WHIT">    </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="KEYW">true</span><span class="PUNC">;</span><span class="TOKN">
<span class='line'> 22</span> </span><span class="PUNC">}</span><span class="TOKN">
<span class='line'> 23</span> </span><span class="TOKN">
<span class='line'> 24</span> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="NAME">getSelectedSearchDB</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="TOKN">
<span class='line'> 25</span> </span><span class="WHIT">    </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">jQuery</span><span class="PUNC">(</span><span class="STRN">"#sbSelectSearchDB option:selected"</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="TOKN">
<span class='line'> 26</span> </span><span class="PUNC">}</span><span class="TOKN">
<span class='line'> 27</span> </span><span class="TOKN">
<span class='line'> 28</span> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="NAME">getFieldChanges</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="TOKN">
<span class='line'> 29</span> </span><span class="WHIT">    </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">mFieldChanges</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">jQuery</span><span class="PUNC">(</span><span class="STRN">"#gc input#hdnFieldChanges"</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">val</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="TOKN">
<span class='line'> 30</span> </span><span class="WHIT">    </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">mFieldChanges</span><span class="WHIT"> </span><span class="PUNC">!=</span><span class="WHIT"> </span><span class="STRN">''</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="TOKN">
<span class='line'> 31</span> </span><span class="WHIT">        </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">JSON.parse</span><span class="PUNC">(</span><span class="NAME">jQuery</span><span class="PUNC">(</span><span class="STRN">"#gc input#hdnFieldChanges"</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">val</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="TOKN">
<span class='line'> 32</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="WHIT"> </span><span class="KEYW">else</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="TOKN">
<span class='line'> 33</span> </span><span class="WHIT">        </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">JSON.parse</span><span class="PUNC">(</span><span class="STRN">'{}'</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="TOKN">
<span class='line'> 34</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="TOKN">
<span class='line'> 35</span> </span><span class="PUNC">}</span><span class="TOKN">
<span class='line'> 36</span> </span><span class="TOKN">
<span class='line'> 37</span> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="NAME">getFieldChangesAsText</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="TOKN">
<span class='line'> 38</span> </span><span class="WHIT">    </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">jQuery</span><span class="PUNC">(</span><span class="STRN">"#gc input#hdnFieldChanges"</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">val</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="TOKN">
<span class='line'> 39</span> </span><span class="PUNC">}</span><span class="TOKN">
<span class='line'> 40</span> </span><span class="TOKN">
<span class='line'> 41</span> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="NAME">setFieldChanges</span><span class="PUNC">(</span><span class="NAME">pChangedFields</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="TOKN">
<span class='line'> 42</span> </span><span class="WHIT">    </span><span class="NAME">jQuery</span><span class="PUNC">(</span><span class="STRN">"#gc input#hdnFieldChanges"</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">val</span><span class="PUNC">(</span><span class="NAME">pChangedFields</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="TOKN">
<span class='line'> 43</span> </span><span class="WHIT">    </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="KEYW">true</span><span class="PUNC">;</span><span class="TOKN">
<span class='line'> 44</span> </span><span class="PUNC">}</span><span class="TOKN">
<span class='line'> 45</span> </span><span class="TOKN">
<span class='line'> 46</span> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="NAME">getSelectedSearchResultItem</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="TOKN">
<span class='line'> 47</span> </span><span class="WHIT">    </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">jQuery</span><span class="PUNC">(</span><span class="STRN">"#listSearchResults li.ui-selected"</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">first</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="TOKN">
<span class='line'> 48</span> </span><span class="PUNC">}</span><span class="TOKN">
<span class='line'> 49</span> </span><span class="TOKN">
<span class='line'> 50</span> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="NAME">loadSearchDBs</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="TOKN">
<span class='line'> 51</span> </span><span class="WHIT">    </span><span class="NAME">jQuery.getJSON</span><span class="PUNC">(</span><span class="STRN">"./ws/ws-load-search-dbs.php"</span><span class="PUNC">,</span><span class="TOKN">
<span class='line'> 52</span> </span><span class="WHIT">            </span><span class="PUNC">{</span><span class="TOKN">
<span class='line'> 53</span> </span><span class="WHIT">            </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="TOKN">
<span class='line'> 54</span> </span><span class="WHIT">            </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">data</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="TOKN">
<span class='line'> 55</span> </span><span class="WHIT">                </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">data.s</span><span class="WHIT"> </span><span class="PUNC">==</span><span class="WHIT"> </span><span class="NUMB">1</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="TOKN">
<span class='line'> 56</span> </span><span class="WHIT">                    </span><span class="NAME">jQuery.each</span><span class="PUNC">(</span><span class="NAME">data.d</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">key</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">val</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="TOKN">
<span class='line'> 57</span> </span><span class="WHIT">                        </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">opt</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">jQuery</span><span class="PUNC">(</span><span class="STRN">"&lt;option value=\"</span><span class="STRN">" + val.id + "</span><span class="TOKN">\</span><span class="STRN">">"</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="NAME">val.sch_title</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="STRN">"&lt;/option>"</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="TOKN">
<span class='line'> 58</span> </span><span class="WHIT">                        </span><span class="NAME">opt.data</span><span class="PUNC">(</span><span class="STRN">"attributes"</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">val</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="TOKN">
<span class='line'> 59</span> </span><span class="WHIT">                        </span><span class="NAME">jQuery</span><span class="PUNC">(</span><span class="STRN">"#sbSelectSearchDB"</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">append</span><span class="PUNC">(</span><span class="NAME">opt</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="TOKN">
<span class='line'> 60</span> </span><span class="WHIT">                    </span><span class="PUNC">}</span><span class="PUNC">)</span><span class="TOKN">
<span class='line'> 61</span> </span><span class="WHIT">                    </span><span class="COMM">//console.log("Success loading search datbases");
<span class='line'> 62</span>                 } else {
<span class='line'> 63</span>                     console.log("Loading search databases unsuccessful: " + d.m);
<span class='line'> 64</span>                 }
<span class='line'> 65</span>             }).fail(function() {
<span class='line'> 66</span>         console.log('Error loading search databases.')
<span class='line'> 67</span>     });
<span class='line'> 68</span> }
<span class='line'> 69</span> 
<span class='line'> 70</span> function loadSearchResults() {
<span class='line'> 71</span>     var bbox = null;
<span class='line'> 72</span>     if (jQuery("#cbLimitToBbox").prop("checked")) {
<span class='line'> 73</span>         var bbox = map.getExtent().transform(p900913, p4326).toBBOX();
<span class='line'> 74</span>     }
<span class='line'> 75</span> 
<span class='line'> 76</span>     var mWebService = getSelectedSearchDB().data("attributes").sch_webservice;
<span class='line'> 77</span>     var mTable = getSelectedSearchDB().data("attributes").sch_table;
<span class='line'> 78</span>     var mSearchTerm = jQuery("#tbSearchTerm").val();
<span class='line'> 79</span>     jQuery.getJSON("./ws/" + mWebService + ".php",
<span class='line'> 80</span>             {
<span class='line'> 81</span>                 q: mSearchTerm,
<span class='line'> 82</span>                 bbox: bbox,
<span class='line'> 83</span>                 t: mTable
<span class='line'> 84</span>             },
<span class='line'> 85</span>     function(data) {
<span class='line'> 86</span>         /*
<span class='line'> 87</span>          * Empty search result list
<span class='line'> 88</span>          */
<span class='line'> 89</span>         jQuery("#listSearchResults").empty();
<span class='line'> 90</span>         jQuery("#txtSearchHint").empty();
<span class='line'> 91</span> 
<span class='line'> 92</span>         if (data.s == 1) {
<span class='line'> 93</span>             if (data.d.length > 0) {
<span class='line'> 94</span>                 /*
<span class='line'> 95</span>                  * Add options to adm0
<span class='line'> 96</span>                  */
<span class='line'> 97</span>                 jQuery.each(data.d, function(key, val) {
<span class='line'> 98</span>                     var li = jQuery("&lt;li class=\"ui-state-default\">&lt;/option>");
<span class='line'> 99</span>                     li.html(val.asciiname);
<span class='line'>100</span>                     li.val(val.geonameid);
<span class='line'>101</span>                     li.data("attributes", val);
<span class='line'>102</span>                     jQuery("#listSearchResults").append(li);
<span class='line'>103</span>                 });
<span class='line'>104</span>             } else {
<span class='line'>105</span>                 jQuery("#txtSearchHint").empty().html("No hits...");
<span class='line'>106</span>             }
<span class='line'>107</span>         } else {
<span class='line'>108</span>             showMsgBox(data.m, true);
<span class='line'>109</span>         }
<span class='line'>110</span>     }).fail(function() {
<span class='line'>111</span>         showMsgBox("Error while loading search results", true);
<span class='line'>112</span>     });
<span class='line'>113</span> }
<span class='line'>114</span> 
<span class='line'>115</span> function saveGeocoding(pTable, pId, pLon, pLat, pProbability, pItemName, pFieldChanges) {
<span class='line'>116</span>     var dsID = getSelectedDatasource().id;
<span class='line'>117</span>     console.log(pFieldChanges);
<span class='line'>118</span>     jQuery.getJSON('./ws/ws-update2.php',
<span class='line'>119</span>             {
<span class='line'>120</span>                 //table:pTable,
<span class='line'>121</span>                 dsID: dsID,
<span class='line'>122</span>                 id: pId,
<span class='line'>123</span>                 lon: pLon,
<span class='line'>124</span>                 lat: pLat,
<span class='line'>125</span>                 probability: pProbability,
<span class='line'>126</span>                 name: pItemName,
<span class='line'>127</span>                 fieldChanges: pFieldChanges
<span class='line'>128</span>             },
<span class='line'>129</span>     function(data) {
<span class='line'>130</span>         if (data.s == "1") {
<span class='line'>131</span>             jQuery("#selectable li.ui-selected").removeClass().addClass("ui-state-default").addClass("ui-state-highlight").addClass("ui-selected");
<span class='line'>132</span>             var mProbability = jQuery('input[name=rbProbability]:checked', '#gc').val();
<span class='line'>133</span>             if (mProbability != null) {
<span class='line'>134</span>                 getSelectedSourceItem().addClass("prob" + mProbability);
<span class='line'>135</span>                 getSelectedSourceItem().data("attributes").gc_probability = mProbability;
<span class='line'>136</span>                 getSelectedSourceItem().data("attributes").gc_name = jQuery("#tbItemName").val();
<span class='line'>137</span>                 getSelectedSourceItem().data("attributes").gc_fieldchanges = getFieldChangesAsText();
<span class='line'>138</span>                 getSelectedSourceItem().data("attributes")._nc = jQuery("#tbItemName").val();
<span class='line'>139</span>                 getSelectedSourceItem().html(jQuery("#tbItemName").val());
<span class='line'>140</span>                 var mLonLat = new OpenLayers.LonLat(jQuery("#tbLongitude", "#gc").val(), jQuery("#tbLatitude", "#gc").val()).transform(pDatasource, p4326);
<span class='line'>141</span>                 getSelectedSourceItem().data("attributes").gc_lon = mLonLat.lon;
<span class='line'>142</span>                 getSelectedSourceItem().data("attributes").gc_lat = mLonLat.lat;
<span class='line'>143</span>             }
<span class='line'>144</span>         } else {
<span class='line'>145</span>             jQuery("#dialog").html(data.m);
<span class='line'>146</span>             jQuery("#dialog").dialog();
<span class='line'>147</span>         }
<span class='line'>148</span>     }).fail(function() {
<span class='line'>149</span>         console.log("Error during save.");
<span class='line'>150</span>     });
<span class='line'>151</span> 
<span class='line'>152</span> }
<span class='line'>153</span> 
<span class='line'>154</span> function showGeocodingForm() {
<span class='line'>155</span>     jQuery("#gcFormContainer").css("display", "block");
<span class='line'>156</span> }
<span class='line'>157</span> 
<span class='line'>158</span> function clearDatasourceFilters() {
<span class='line'>159</span>     jQuery("#sbFilterAdm0").empty().val("");
<span class='line'>160</span>     jQuery("#sbFilterAdm1").empty().val("");
<span class='line'>161</span>     jQuery("#sbFilterProbability").val("");
<span class='line'>162</span>     jQuery("#sbFilterCategory").empty().val("");
<span class='line'>163</span> }
<span class='line'>164</span> 
<span class='line'>165</span> /**
<span class='line'>166</span>  * Creates a set of html paragraphs from an array
<span class='line'>167</span>  * 
<span class='line'>168</span>  * @param {Array} pMessageArray
<span class='line'>169</span>  * @returns {String}
<span class='line'>170</span>  */
<span class='line'>171</span> function getErrorMessages(pMessageArray) {
<span class='line'>172</span>     var mHtml;
<span class='line'>173</span>     for (var i = 0; i &lt; pMessageArray.length; i++) {
<span class='line'>174</span>         mHtml += "&lt;p>" + pMessageArray[i] + "&lt;/p>";
<span class='line'>175</span>     }
<span class='line'>176</span>     return mHtml;
<span class='line'>177</span> }
<span class='line'>178</span> 
<span class='line'>179</span> function showMsgBox(pMsg, pError) {
<span class='line'>180</span>     var mCssClass = "ui-state-notification";
<span class='line'>181</span>     var mContent = jQuery("&lt;ul>&lt;/ul>");
<span class='line'>182</span>     var mTitle = "Notification!";
<span class='line'>183</span>     if (pError == true) {
<span class='line'>184</span>         mCssClass = "ui-state-highlight";
<span class='line'>185</span>         mTitle = "Error!";
<span class='line'>186</span>     }
<span class='line'>187</span>     /*
<span class='line'>188</span>      * Ig pMsg is a string, simply add the string to a list element
<span class='line'>189</span>      */
<span class='line'>190</span>     if (typeof pMsg == "string") {
<span class='line'>191</span>         mContent.append("&lt;li>" + pMsg + "&lt;/li>");
<span class='line'>192</span>     } else {
<span class='line'>193</span>         /*
<span class='line'>194</span>          * Otherwise, iterate through the array, object and add each value to a list
<span class='line'>195</span>          */
<span class='line'>196</span>         jQuery.each(pMsg, function(key, val) {
<span class='line'>197</span>             mContent.append("&lt;li>" + key + ": " + val + "&lt;/li>");
<span class='line'>198</span>         });
<span class='line'>199</span>     }
<span class='line'>200</span> 
<span class='line'>201</span>     jQuery("#dialog").empty()
<span class='line'>202</span>             .append("&lt;p>&lt;/p>")
<span class='line'>203</span>             .addClass(mCssClass)
<span class='line'>204</span>             .html(mContent).dialog({
<span class='line'>205</span>         title: mTitle,
<span class='line'>206</span>         modal: true,
<span class='line'>207</span>         width: 480,
<span class='line'>208</span>         height: 200,
<span class='line'>209</span>         resizeable: true,
<span class='line'>210</span>         minwidth: 480,
<span class='line'>211</span>         maxWidth: 640,
<span class='line'>212</span>         minHeight: 200,
<span class='line'>213</span>         maxHeight: 480
<span class='line'>214</span>     });
<span class='line'>215</span> }
<span class='line'>216</span> 
<span class='line'>217</span> function hideGeocodingForm() {
<span class='line'>218</span>     jQuery("#gcFormContainer").css("display", "none");
<span class='line'>219</span> }</span></pre></body></html>